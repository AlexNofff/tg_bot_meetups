# Бот обратной связи для Telegram

Асинхронный бот обратной связи для Telegram, позволяющий организовать общение между администратором и пользователями канала.

## Особенности

- Асинхронная работа с использованием aiogram 3.x
- Мультиязычность (поддержка русского и английского языков)
- Сохранение истории сообщений в SQLite базе данных
- Удобный интерфейс администратора
- Отдельные чаты с каждым пользователем
- Просмотр истории сообщений
- Быстрый переход к диалогу с пользователем
- Система регистрации пользователей с сбором информации:
  - Имя
  - Номер телефона
  - Страна (опционально)
  - О себе (опционально)
  - Предпочитаемый язык
- Рассылка сообщений:
  - Всем пользователям
  - Пользователям с определенным языком
  - История рассылок

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/feedback-bot.git
cd feedback-bot
```

2. Создайте виртуальное окружение и активируйте его:
```bash
python -m venv venv
source venv/bin/activate  # Для Linux/Mac
venv\Scripts\activate     # Для Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте файл .env на основе .env.example и заполните его:
```bash
cp .env.example .env
```

## Настройка

1. Получите токен бота у @BotFather в Telegram
2. Узнайте свой Telegram ID (можно использовать @userinfobot)
3. Заполните файл .env:
   - BOT_TOKEN - токен вашего бота
   - ADMIN_ID - ваш Telegram ID

## Запуск

```bash
python bot.py
```

## Использование

### Для администратора:

1. Отправьте команду /admin для доступа к панели администратора
2. Доступные функции:
   - "Список активных чатов" - просмотр текущих диалогов
   - "Создать рассылку" - отправка сообщений группам пользователей
3. Для каждого чата доступны кнопки:
   - "Открыть чат" - прямой переход к диалогу
   - "История сообщений" - просмотр всей истории переписки

Для ответа пользователю просто ответьте на пересланное сообщение.

### Для пользователей:

1. Начните диалог с ботом, отправив команду /start
2. Выберите предпочитаемый язык (русский или английский)
3. Пройдите процесс регистрации:
   - Введите ваше имя
   - Поделитесь номером телефона
   - Укажите страну (опционально)
   - Расскажите о себе (опционально)
4. После регистрации отправляйте сообщения - они будут доставлены администратору
5. Ждите ответа администратора

## Требования

- Python 3.7+
- aiogram 3.x
- SQLAlchemy 2.0+
- aiosqlite 